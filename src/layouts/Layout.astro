---
import { ViewTransitions } from 'astro:transitions';
import Modal from '../components/Modal.astro';
// CSSファイルをインポートします
import '../styles/global.css';

interface Props {
    title: string;
    description?: string;
}

const { title, description = 'VRChatで遊んでいる「そら」のサイトです。' } = Astro.props;
const siteName = "そら | soran.link";
const pageTitle = title === "そら | soran.link" ? siteName : `${title} | ${siteName}`;
const ogpImage = "https://soran.link/img/ogp.jpg";
const siteUrl = "https://soran.link";
---

<!doctype html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>☁️</text></svg>">
    <title>{pageTitle}</title>
    <meta name="description" content={description} />

    <!-- OGP Tags -->
    <meta property="og:title" content={pageTitle}>
    <meta property="og:description" content={description}>
    <meta property="og:image" content={ogpImage}>
    <meta property="og:url" content={Astro.url}>
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- View Transitions for smooth page navigation -->
    <ViewTransitions />
</head>
<body class="text-slate-700">
<div id="content-wrapper" class="max-w-4xl mx-auto my-12 md:my-24 bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden">
    <main class="p-6 sm:p-10 md:p-16">
        <slot />
    </main>
    <footer class="bg-slate-100/70 text-slate-600">
        <div class="px-6 py-8 text-center text-sm">
            <div class="mb-4">
                <a href="/privacy" class="text-xs text-slate-500 hover:underline">プライバシーポリシー</a>
            </div>
            <p>&copy; 2025 soran.link. All Rights Reserved.</p>
        </div>
    </footer>
</div>

<Modal />

<script>
    // Section fade-in observer
    document.addEventListener('astro:page-load', () => {
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });
        sections.forEach(section => observer.observe(section));
    });
</script>
</body>
</html>
