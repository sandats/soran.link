---
import { ViewTransitions } from 'astro:transitions';
import Modal from '../components/Modal.astro';
// CSSファイルをインポートします
import '../styles/global.css';

interface Props {
    title: string;
    description?: string;
}

const { title, description = 'VRChatで遊んでいる「そら」のサイトです。' } = Astro.props;
const siteName = "そら | soran.link";
const pageTitle = title === "そら | soran.link" ? siteName : `${title} | ${siteName}`;
const ogpImage = "https://soran.link/img/ogp.jpg";
const siteUrl = "https://soran.link";

const currentYear = new Date().getFullYear();
---

<!doctype html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>☁️</text></svg>">
    <title>{pageTitle}</title>
    <meta name="description" content={description} />

    <!-- OGP Tags -->
    <meta property="og:title" content={pageTitle}>
    <meta property="og:description" content={description}>
    <meta property="og:image" content={ogpImage}>
    <meta property="og:url" content={Astro.url}>
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <ViewTransitions />
</head>
<body class="text-slate-700">
<div class="max-w-4xl mx-auto my-12 md:my-24 bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden">
    <main class="p-6 sm:p-10 md:p-16">
        <slot />
    </main>
    <footer class="bg-slate-100/70 text-slate-600">
        <div class="px-6 py-8 text-center text-sm">
            <div class="mb-4">
                <a href="/privacy" class="text-xs text-slate-500 hover:underline">プライバシーポリシー</a>
            </div>
            <p>&copy; {currentYear} soran.link. All Rights Reserved.</p>
        </div>
    </footer>
</div>

<Modal />

<style is:global>
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-image: url('/img/recent_photo_01.jpg');
        background-size: cover;
        background-position: center 70%;
        background-attachment: fixed;
    }
    .fade-in-section {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .fade-in-section.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
</style>
<script>
    document.addEventListener('astro:page-load', () => {
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        sections.forEach(section => observer.observe(section));
    });
</script>
<script type="text/javascript" src="//typesquare.com/3/tsst/script/ja/typesquare.js?5e27f6df91004ae4bf9f35d4ac1e0217" charset="utf-8"></script>
</body>
</html>
